<!doctype html><html><head><meta charset="UTF-8"><script>!function(){"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class e{constructor(e){t(this,"_providerType",null),t(this,"_provider",null),t(this,"_accounts",[]),t(this,"_currentChain",null),t(this,"_uiEventsCallback",null),t(this,"DEFAULT_GAS",9e4),this._uiEventsCallback=e}async init(){await this._getProvider(),await this._initProvider(),this._triggerEvent("wallet_init_complete")}async getAccount(t){if(this._accounts&&this._accounts[0])return this._accounts[0];switch(this._providerType){case"metamask":const e=await this._metamaskGetAccounts(t);return e&&e[0]||null;default:return null}}async getChain(){return this._currentChain}async connect(){return await this.getAccount()}async sendTransaction(t){const{provider:e}=await this._getProvider(),n=await this.getAccount({throwError:!0});if(!e)throw this._triggerEvent("wallet_missing_wallet_provider"),new Error("No wallet provider exists");if(!n)throw this._triggerEvent("wallet_missing_account"),new Error("No account provided");return await e.request({method:"eth_sendTransaction",params:[{from:t.fromAddress||n,to:t.toAddress,gas:t.gas||`0x${this.DEFAULT_GAS.toString(16)}`,gasPrice:t.gasPrice,value:t.value,data:t.data}]})}async _getProvider(){if(this._provider)return{provider:this._provider,type:this._providerType};let t=!1;return new Promise((e=>{const n=()=>{if(t)return;t=!0,window.removeEventListener("ethereum#initialized",n);const{ethereum:i}=window;i?(this._provider=window.ethereum,this._providerType=i.isMetaMask?"metamask":"other",e({provider:this._provider,type:this._providerType})):e(null)};window.ethereum?n():(window.addEventListener("ethereum#initialized",n,{once:!0}),setTimeout((()=>{n()}),3e3))}))}async _initProvider(){switch(this._providerType){case"metamask":await this._metamaskInit();break;default:this._triggerEvent("wallet_missing_wallet_provider")}}async _triggerEvent(t,e){this._uiEventsCallback&&this._uiEventsCallback(t,e)}async _metamaskInit(){const t=await this._provider.request({method:"eth_chainId"});this._handleChainChanged(t),this._provider.on("chainChanged",(t=>this._handleChainChanged(t))),this._provider.request({method:"eth_accounts"}).then((t=>this._handleAccountsChanged(t))).catch((t=>{console.error(t),this._triggerEvent("wallet_missing_account")})),this._provider.on("accountsChanged",(t=>this._handleAccountsChanged(t)))}async _metamaskGetAccounts(t){try{const t=await this._provider.request({method:"eth_requestAccounts"});return this._handleAccountsChanged(t),t}catch(e){if(4001===e.code?this._triggerEvent("wallet_user_reject_provide_accounts"):console.error(e),this._handleAccountsChanged(null),t&&t.throwError)throw e;return null}}_handleChainChanged(t){this._currentChain!==t&&(this._currentChain=t,this._triggerEvent("wallet_chain_changed",{chainId:t}))}_handleAccountsChanged(t){this._accounts=t,t&&0!==t.length||this._triggerEvent("wallet_missing_account"),this._triggerEvent("wallet_account_changed",{account:this._accounts&&this._accounts[0]})}}function n(t,e){const n=t.endsWith("_error");window.parent.postMessage({wixEventType:t,payload:e,isError:n},"*")}function i(t,e){n(t,e)}document.addEventListener("DOMContentLoaded",(()=>{!async function(){const t=new e(i);await t.init(),window.onmessage=async function(e){if(e.data&&"object"==typeof e.data&&e.data.wixEventType){const i=e.data.payload;switch(e.data.wixEventType){case"connect_to_wallet":!async function(t){try{const e=await t.connect();e?n("connect_to_wallet_success",{account:e}):n("connect_to_wallet_error",{error:new Error("No account provided")})}catch(t){n("connect_to_wallet_error",{error:t})}}(t);break;case"send_transaction":!async function(t,e){try{n("send_transaction_success",{signature:await t.sendTransaction(e)})}catch(t){n("send_transaction_error",t)}}(t,i)}}}}()}))}();</script></head><body></body></html>